<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="700.0" prefWidth="1300.0" styleClass="parent" stylesheets="@styles_new.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.EvenementAllController">
    <left>
        <!-- Sidebar qui s'étend au survol -->
        <AnchorPane fx:id="sidebar" onMouseEntered="#expandSidebar" onMouseExited="#collapseSidebar" prefHeight="500.0" prefWidth="70.0" styleClass="sidebar">
            <children>
                <!-- Conteneur global avec contraintes d'ancrage -->
                <VBox layoutX="10.0" layoutY="165.0" prefHeight="600.0" prefWidth="87.2" spacing="15.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
                    <HBox>
                        <children>
                            <Circle fill="DODGERBLUE" radius="28.0" stroke="BLACK" strokeType="INSIDE" />
                            <Label fx:id="labelUser" alignment="CENTER" text="Label" textFill="WHITE" visible="false">
                                <font>
                                    <Font name="Open Sans Regular" size="12.0" />
                                </font>
                                <HBox.margin>
                                    <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                </HBox.margin>
                            </Label>
                        </children>
                        <VBox.margin>
                            <Insets bottom="50.0" />
                        </VBox.margin>
                    </HBox>
                    <!-- Options du menu -->
                    <VBox spacing="10.0">
                        <!-- Option SITEMAP -->
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="menu-item">
                            <Button fx:id="btnSitemap" mnemonicParsing="false" onAction="#handleSitemapClick" styleClass="sidebar_opt" textFill="#e4e4e4">
                                <graphic>
                                    <FontAwesomeIconView fill="#797878" glyphName="SITEMAP" size="1.5em" styleClass="sidebar_opt" />
                                </graphic>
                                <HBox.margin>
                                    <Insets left="5.0" />
                                </HBox.margin>
                                <font>
                                    <Font name="Open Sans Medium" size="12.0" />
                                </font>
                            </Button>
                        </HBox>
                        <!-- Option HOME -->
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="menu-item">
                            <Button fx:id="btnHome" mnemonicParsing="false" onAction="#handleHomeClick" styleClass="sidebar_opt" textFill="#e4e4e4">
                                <graphic>
                                    <FontAwesomeIconView fill="#797878" glyphName="HOME" size="1.5em" styleClass="sidebar_opt" />
                                </graphic>
                                <HBox.margin>
                                    <Insets left="5.0" />
                                </HBox.margin>
                                <font>
                                    <Font name="Open Sans Medium" size="12.0" />
                                </font>
                            </Button>
                        </HBox>
                    </VBox>
                    <!-- Séparateur pour délimiter des sections -->
                    <Separator />
                    <!-- Option additionnelle -->
                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="menu-item">
                        <Button fx:id="btnHome1" mnemonicParsing="false" onAction="#handleHomeClick" styleClass="sidebar_opt" textFill="#e4e4e4">
                            <graphic>
                                <FontAwesomeIconView fill="#797878" glyphName="USER" size="1.5em" styleClass="sidebar_opt" />
                            </graphic>
                            <HBox.margin>
                                <Insets left="5.0" />
                            </HBox.margin>
                            <font>
                                <Font name="Open Sans Medium" size="12.0" />
                            </font>
                        </Button>
                    </HBox>
                    <Separator>
                        <VBox.margin>
                            <Insets top="100.0" />
                        </VBox.margin></Separator>
                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="menu-item">
                        <children>
                            <Button fx:id="btnLogout" alignment="TOP_LEFT" mnemonicParsing="false" prefHeight="14.0" prefWidth="86.0" styleClass="sidebar_opt" stylesheets="@styles_new.css" textFill="WHITE">
                                <graphic>
                                    <FontAwesomeIconView fill="#eaeaea" glyphName="POWER_OFF" selectionFill="#bc802d" size="1.5em" />
                                </graphic>
                                <font>
                                    <Font name="Open Sans Regular" size="12.0" />
                                </font>
                            </Button>
                        </children>
                    </HBox>
                    <padding>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                    </padding>
                </VBox>
            </children>
            <BorderPane.margin>
                <Insets left="5.0" />
            </BorderPane.margin>
        </AnchorPane>
    </left>
     <center>
         <!-- Zone centrale pour le contenu -->
         <AnchorPane fx:id="mainContent" styleClass="pane">
         <children>
             <ScrollPane hbarPolicy="NEVER" prefHeight="500.0" prefWidth="843.2" styleClass="transparent_bg" stylesheets="@styles.css" vbarPolicy="ALWAYS" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0" />
         </children>
         <ScrollPane fitToWidth="true" layoutX="1.6" layoutY="19.0" prefHeight="766.4" prefWidth="1270.4" styleClass="transparent_bg" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <content>
               <HBox>
                  <children>
                          <VBox prefHeight="980.0" prefWidth="572.0" spacing="10" styleClass="widget">
                              <padding>
                                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                              </padding>
                              <children>
                           <VBox>
                              <children>
                                        <Label fx:id="AjouterEvent" alignment="CENTER" prefHeight="66.0" prefWidth="242.0" style="-fx-font-size: 16; -fx-font-weight: bold;" styleClass="task-form" text="Modifier ou supprimer événement" />
                        
                                        <TextField fx:id="evenementNomField" onAction="#verifierNomEvenement" promptText="Taper le nom de l'événement" styleClass="task-form" />
                        
                                        <TextArea fx:id="evenementDescriptionArea" promptText="Taper la description de l'événement" styleClass="task-form" />
                              </children>
                           </VBox>
                  
                                  <HBox spacing="15" styleClass="transparent_bg">
                                      <children>
                                          <DatePicker fx:id="evenementDateDebutPicker" promptText="Date de début" styleClass="task-form" HBox.hgrow="ALWAYS" />
                                          <Spinner fx:id="evenementHeureDebutField" editable="true" styleClass="task-form" HBox.hgrow="ALWAYS" />
                                      </children>
                                  </HBox>
                  
                                  <HBox spacing="15" styleClass="transparent_bg">
                                      <children>
                                          <DatePicker fx:id="evenementDateFinPicker" promptText="Date de fin" styleClass="task-form" HBox.hgrow="ALWAYS" />
                                          <Spinner fx:id="evenementHeureFinField" editable="true" styleClass="task-form" HBox.hgrow="ALWAYS" />
                                      </children>
                                  </HBox>
                           <VBox>
                              <children>
                        
                                        <TextField fx:id="evenementLieuField" promptText="Taper le lieu de l'événement" styleClass="task-form" />
                        
                                        <ComboBox fx:id="evenementCategorieComboBox" editable="true" promptText="Choisir la catégorie de l'événement" styleClass="task-form" />
                              </children>
                           </VBox>
                  
                                  <HBox spacing="10" styleClass="transparent_bg">
                                      <children>
                                          <TextField fx:id="evenementBudgetField" promptText="Taper le budget de l'événement" styleClass="task-form" HBox.hgrow="ALWAYS" />
                                          <Label styleClass="task-form" text="TND" />
                                      </children>
                                  </HBox>
                  
                                  <TextField fx:id="evenementNbPlacesField" promptText="Taper le nombre de places de l'événement" styleClass="task-form" />
                  
                                  <VBox spacing="10" styleClass="transparent_bg">
                                      <children>
                                          <Button fx:id="choisirImageButton" onAction="#choisirImage" styleClass="colored_card" text="Choisir une image" />
                                          <TextField fx:id="evenementImageField" editable="false" visible="false" />
                                      </children>
                                  </VBox>
                  
                                  <ImageView fx:id="imagePreview" fitHeight="113.0" fitWidth="133.0" preserveRatio="true" />
                  
                                  <HBox spacing="10" styleClass="transparent_bg">
                                      <children>
                                          <Button fx:id="evenementModifierButton" onAction="#modifierEvenement" styleClass="colored_card" text="Modifier" HBox.hgrow="ALWAYS" />
                                          <Button fx:id="evenementSupprimerButton" onAction="#supprimerEvenement" styleClass="colored_card" text="Supprimer" HBox.hgrow="ALWAYS" />
                                      </children>
                                  </HBox>
                              </children>
                          </VBox>
                  
                          <VBox prefHeight="980.0" prefWidth="1021.0" spacing="10" styleClass="transparent_bg">
                           <Label style="-fx-font-size: 30; -fx-font-weight: bold;" text="Liste des événements" />
                              <HBox alignment="CENTER_LEFT" spacing="20" styleClass="transparent_bg" AnchorPane.topAnchor="62.0">
                                  <!-- Premier HBox : Recherche -->
                                  <HBox alignment="CENTER_LEFT" spacing="10" styleClass="transparent_bg">
                                      <Label prefHeight="19.0" prefWidth="111.0" text="Rechercher :" />
                                      <TextField fx:id="rechercheField" prefHeight="34.0" prefWidth="146.0" promptText="Rechercher..." styleClass="search-field">
                                 <font>
                                    <Font name="Open Sans Regular" size="12.0" />
                                 </font></TextField>
                                      <Button fx:id="effacerRechercheButton" onAction="#effacerRecherche" prefHeight="42.0" prefWidth="37.0" styleClass="button_crud" text="×" />
                                  </HBox>
                           <VBox prefHeight="108.0" prefWidth="299.0">
                              <children>
                                         <CheckBox fx:id="triDescendantCheckBox" prefHeight="42.0" prefWidth="198.0" styleClass="button_crud" text="Tri descendant">
                                             <padding>
                                                 <Insets bottom="2.0" left="5.0" right="2.0" top="1.0" />
                                             </padding>
                                         </CheckBox>
                                 <HBox>
                                    <children>
                                       <Label text="Trier par :">
                                          <font>
                                             <Font name="Open Sans Regular" size="14.0" />
                                          </font>
                                          <HBox.margin>
                                             <Insets top="20.0" />
                                          </HBox.margin>
                                       </Label>
                                               <ComboBox fx:id="colonneTriComboBox" prefHeight="45.0" prefWidth="113.0" styleClass="task-form" />
                                    </children>
                                 </HBox>
                              </children>
                           </VBox>
                           <VBox>
                              <HBox.margin>
                                 <Insets />
                              </HBox.margin>
                              <children>
                                         <Button fx:id="refreshButton" onAction="#loadEvenements" prefHeight="42.0" prefWidth="211.0" styleClass="button_crud" text="Rafraîchir" />
                                         <Button fx:id="ajouterButton" onAction="#handleAjouterButton" prefHeight="42.0" prefWidth="306.0" styleClass="button_crud" text="Ajouter événement">
                                    <VBox.margin>
                                       <Insets top="10.0" />
                                    </VBox.margin>
                                 </Button>
                              </children>
                           </VBox>
                              </HBox>
                  
                  
                  
                              <TableView fx:id="evenementTable" prefHeight="595.0" prefWidth="747.0" styleClass="pane">
                                  <columns>
                                      <TableColumn fx:id="nomColumn" prefWidth="75.0" text="Nom" />
                                      <TableColumn fx:id="descriptionColumn" prefWidth="96.5333251953125" text="Description" />
                                      <TableColumn fx:id="dateDebutColumn" prefWidth="122.66665649414062" text="Date de début" />
                                      <TableColumn fx:id="dateFinColumn" prefWidth="128.800048828125" text="Date de fin" />
                                      <TableColumn fx:id="lieuColumn" minWidth="0.0" prefWidth="54.39996337890625" text="Lieu" />
                                      <TableColumn fx:id="categorieColumn" minWidth="6.39996337890625" prefWidth="75.199951171875" text="Catégorie" />
                                      <TableColumn fx:id="budgetColumn" prefWidth="75.99993896484375" text="Budget" />
                                      <TableColumn fx:id="nbPlacesColumn" prefWidth="140.800048828125" text="Nombre de places" />
                                      <TableColumn fx:id="actionsColumn" prefWidth="136.80002441406248" text="Action" />
                                  </columns>
                           <columnResizePolicy>
                              <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                           </columnResizePolicy>
                              </TableView>
                     
                     
                     
                             <Button fx:id="evenementFermerButton" onAction="#handleFermerButton" prefHeight="38.0" prefWidth="75.0" styleClass="colored_card" text="Fermer" />
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                          </VBox>
                  </children>
               </HBox>
            </content>
         </ScrollPane>
         <BorderPane.margin>
            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
         </BorderPane.margin>
          </AnchorPane>
      </center>
   </BorderPane>
